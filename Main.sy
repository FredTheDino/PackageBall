mod Main

type State = { x : Int, p : Vec }

def spy : a -> a := foreign -[[
    function(x)
        print(x)
        return x
    end
]]-

def init :  Int -> State : _ = { x: 2, p: { x:0, y:0 } }

def update : Real -> State -> State : dt state@{ p } = spy { p: Vec.add {x:1.0, y:1.0} p | state }


def draw
: State -> Render Int
: state = Render.pure 1
